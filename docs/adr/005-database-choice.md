# ADR-005: PostgreSQL/SQLite для БД

**Дата**: 2025-02-01
**Статус**: Accepted

## Контекст

Необходимо было выбрать СУБД. Рассматривались:

1. **PostgreSQL** — реляционная, open-source
2. **MySQL/MariaDB** — реляционная, open-source
3. **SQL Server** — реляционная, Microsoft
4. **MongoDB** — документная, NoSQL
5. **SQLite** — встраиваемая, файловая

Требования:
- Реляционная модель (клиенты, заказы, услуги)
- Простота развёртывания для разработки
- Надёжность для production

## Решение

Выбран **гибридный подход**:
- **PostgreSQL 16** — для production (Docker)
- **SQLite** — для разработки и тестов

Entity Framework Core абстрагирует различия между СУБД.

## Последствия

### Положительные

- **Простота разработки**: SQLite не требует установки сервера
- **Надёжность production**: PostgreSQL — enterprise-grade СУБД
- **Единый код**: EF Core работает с обеими СУБД
- **Тесты**: InMemory/SQLite для быстрых тестов
- **Бесплатно**: обе СУБД open-source

### Отрицательные

- **Различия в SQL**: некоторые запросы могут работать по-разному
- **Миграции**: нужно тестировать на обеих СУБД
- **Функции PostgreSQL**: нельзя использовать специфичные фичи

### Нейтральные

- Docker Compose для локального PostgreSQL
- Автоматические миграции при старте

## Связанные решения

- [ADR-002](002-api-technology.md) — Entity Framework Core
