<Window x:Class="HQStudio.Views.Dialogs.ChangePasswordDialog"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="Ð¡Ð¼ÐµÐ½Ð° Ð¿Ð°Ñ€Ð¾Ð»Ñ" 
        Height="380" Width="400"
        WindowStartupLocation="CenterScreen"
        WindowStyle="None"
        AllowsTransparency="True"
        Background="Transparent"
        ResizeMode="NoResize"
        Topmost="True"
        KeyDown="Window_KeyDown"
        FocusManager.FocusedElement="{Binding ElementName=NewPasswordBox}">
    
    <Border Background="{DynamicResource BgDialogBrush}" CornerRadius="16" 
            BorderBrush="{DynamicResource BorderDefaultBrush}" BorderThickness="1">
        <Grid>
            <Grid.RowDefinitions>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="*"/>
            </Grid.RowDefinitions>

            <!-- Header -->
            <Border Grid.Row="0" Background="{DynamicResource BgDialogHeaderBrush}" 
                    CornerRadius="16,16,0,0" Padding="20,16">
                <Grid>
                    <StackPanel>
                        <TextBlock Text="ðŸ” Ð¡Ð¼ÐµÐ½Ð° Ð¿Ð°Ñ€Ð¾Ð»Ñ" FontSize="16" FontWeight="SemiBold" 
                                   Foreground="{DynamicResource TextPrimaryBrush}"/>
                        <TextBlock x:Name="SubtitleText" Text="Ð£ÑÑ‚Ð°Ð½Ð¾Ð²Ð¸Ñ‚Ðµ Ð½Ð¾Ð²Ñ‹Ð¹ Ð¿Ð°Ñ€Ð¾Ð»ÑŒ Ð´Ð»Ñ Ð²Ñ…Ð¾Ð´Ð°" 
                                   FontSize="12" Foreground="{DynamicResource TextMutedBrush}" Margin="0,4,0,0"/>
                    </StackPanel>
                    <Button Content="âœ•" Style="{DynamicResource BtnIcon}" 
                            HorizontalAlignment="Right" VerticalAlignment="Top"
                            Click="CloseButton_Click" x:Name="CloseBtn"
                            IsTabStop="False"/>
                </Grid>
            </Border>

            <!-- Content -->
            <StackPanel Grid.Row="1" Margin="24">
                <!-- Current Password (hidden for first login) -->
                <StackPanel x:Name="CurrentPasswordPanel">
                    <TextBlock Text="Ð¢Ð•ÐšÐ£Ð©Ð˜Ð™ ÐŸÐÐ ÐžÐ›Ð¬" Style="{DynamicResource TextLabel}" Margin="0,0,0,8"/>
                    <PasswordBox x:Name="CurrentPasswordBox" Style="{DynamicResource InputPassword}" 
                                 Margin="0,0,0,16" TabIndex="0"/>
                </StackPanel>

                <TextBlock Text="ÐÐžÐ’Ð«Ð™ ÐŸÐÐ ÐžÐ›Ð¬" Style="{DynamicResource TextLabel}" Margin="0,0,0,8"/>
                <PasswordBox x:Name="NewPasswordBox" Style="{DynamicResource InputPassword}" 
                             Margin="0,0,0,16" TabIndex="1"/>

                <TextBlock Text="ÐŸÐžÐ”Ð¢Ð’Ð•Ð Ð–Ð”Ð•ÐÐ˜Ð• ÐŸÐÐ ÐžÐ›Ð¯" Style="{DynamicResource TextLabel}" Margin="0,0,0,8"/>
                <PasswordBox x:Name="ConfirmPasswordBox" Style="{DynamicResource InputPassword}" 
                             Margin="0,0,0,8" TabIndex="2"/>

                <!-- Error Message -->
                <TextBlock x:Name="ErrorText" Foreground="{DynamicResource AccentRedBrush}" 
                           FontSize="12" Margin="0,4,0,16" TextWrapping="Wrap"/>

                <!-- Buttons -->
                <Grid Margin="0,8,0,0">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="*"/>
                        <ColumnDefinition Width="Auto"/>
                    </Grid.ColumnDefinitions>
                    
                    <Button x:Name="CancelBtn" Grid.Column="0" Content="ÐžÑ‚Ð¼ÐµÐ½Ð°" 
                            Style="{DynamicResource BtnSecondary}" 
                            Click="CancelButton_Click" Margin="0,0,8,0"
                            TabIndex="4" IsCancel="True"/>
                    <Button x:Name="SaveBtn" Grid.Column="1" Content="Ð¡Ð¾Ñ…Ñ€Ð°Ð½Ð¸Ñ‚ÑŒ" 
                            Style="{DynamicResource BtnPrimary}" 
                            Click="SaveButton_Click" Width="120"
                            TabIndex="3" IsDefault="True"/>
                </Grid>
            </StackPanel>
        </Grid>
    </Border>
</Window>
