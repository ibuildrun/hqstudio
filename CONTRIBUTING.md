# Contributing to HQ Studio

–†—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ –≤–Ω–µ—Å–µ–Ω–∏—é –≤–∫–ª–∞–¥–∞ –≤ –ø—Ä–æ–µ–∫—Ç HQ Studio.

## üìã –°–æ–¥–µ—Ä–∂–∞–Ω–∏–µ

- [Conventional Commits](#-conventional-commits)
- [Git Hooks](#-git-hooks)
- [–ö–∞–∫ –¥–µ–ª–∞—Ç—å –∫–æ–º–º–∏—Ç—ã](#-–∫–∞–∫-–¥–µ–ª–∞—Ç—å-–∫–æ–º–º–∏—Ç—ã)
- [–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π —Ä–µ–ª–∏–∑](#-–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π-—Ä–µ–ª–∏–∑)
- [–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ](#-—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ)
- [Pull Request](#-pull-request)
- [CI/CD Pipeline](#-cicd-pipeline)
- [–ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞ CI](#-–ø—Ä–æ–≤–µ—Ä–∫–∞-—Å—Ç–∞—Ç—É—Å–∞-ci)

---

## üìù Conventional Commits

–ú—ã –∏—Å–ø–æ–ª—å–∑—É–µ–º [Conventional Commits](https://www.conventionalcommits.org/) –¥–ª—è —Å—Ç–∞–Ω–¥–∞—Ä—Ç–∏–∑–∞—Ü–∏–∏ —Å–æ–æ–±—â–µ–Ω–∏–π –∫–æ–º–º–∏—Ç–æ–≤.

> ‚ö†Ô∏è **–í–ê–ñ–ù–û:** –í—Å–µ —Å–æ–æ–±—â–µ–Ω–∏—è –∫–æ–º–º–∏—Ç–æ–≤ –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –Ω–∞ **—Ä—É—Å—Å–∫–æ–º —è–∑—ã–∫–µ**!

### –§–æ—Ä–º–∞—Ç –∫–æ–º–º–∏—Ç–∞

```
<type>(<scope>): <description>

[optional body]

[optional footer(s)]
```

### –¢–∏–ø—ã –∫–æ–º–º–∏—Ç–æ–≤

| –¢–∏–ø | –û–ø–∏—Å–∞–Ω–∏–µ | –í–ª–∏—è–Ω–∏–µ –Ω–∞ –≤–µ—Ä—Å–∏—é |
|-----|----------|-------------------|
| `feat` | –ù–æ–≤–∞—è —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å | **minor** (1.x.0) |
| `fix` | –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –±–∞–≥–∞ | **patch** (1.0.x) |
| `perf` | –£–ª—É—á—à–µ–Ω–∏–µ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ | **patch** |
| `refactor` | –†–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥ –∫–æ–¥–∞ | **patch** |
| `docs` | –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è | –ë–µ–∑ —Ä–µ–ª–∏–∑–∞ |
| `style` | –§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ (–Ω–µ –≤–ª–∏—è–µ—Ç –Ω–∞ –∫–æ–¥) | –ë–µ–∑ —Ä–µ–ª–∏–∑–∞ |
| `test` | –î–æ–±–∞–≤–ª–µ–Ω–∏–µ/–∏–∑–º–µ–Ω–µ–Ω–∏–µ —Ç–µ—Å—Ç–æ–≤ | –ë–µ–∑ —Ä–µ–ª–∏–∑–∞ |
| `build` | –°–±–æ—Ä–∫–∞/–∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ | –ë–µ–∑ —Ä–µ–ª–∏–∑–∞ |
| `ci` | CI/CD –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è | –ë–µ–∑ —Ä–µ–ª–∏–∑–∞ |
| `chore` | –ü—Ä–æ—á–∏–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è | –ë–µ–∑ —Ä–µ–ª–∏–∑–∞ |
| `revert` | –û—Ç–∫–∞—Ç –∏–∑–º–µ–Ω–µ–Ω–∏–π | –ó–∞–≤–∏—Å–∏—Ç –æ—Ç —Ç–∏–ø–∞ |

### –û–±–ª–∞—Å—Ç–∏ (scope)

| Scope | –û–ø–∏—Å–∞–Ω–∏–µ |
|-------|----------|
| `api` | HQStudio.API (ASP.NET Core backend) |
| `web` | HQStudio.Web (Next.js frontend) |
| `desktop` | HQStudio.Desktop (WPF –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ) |
| `tests` | –¢–µ—Å—Ç—ã –ª—é–±–æ–≥–æ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞ |
| `docker` | Docker –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è |
| `ci` | CI/CD –ø–∞–π–ø–ª–∞–π–Ω—ã |
| `deps` | –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ |
| `release` | –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ —Ä–µ–ª–∏–∑—ã |

### –ü—Ä–∏–º–µ—Ä—ã

```bash
# –ù–æ–≤–∞—è —Ñ—É–Ω–∫—Ü–∏—è (—Å–æ–∑–¥–∞—Å—Ç minor —Ä–µ–ª–∏–∑)
feat(api): –¥–æ–±–∞–≤–ª–µ–Ω endpoint –¥–ª—è —ç–∫—Å–ø–æ—Ä—Ç–∞ –∑–∞–∫–∞–∑–æ–≤

# –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –±–∞–≥–∞ (—Å–æ–∑–¥–∞—Å—Ç patch —Ä–µ–ª–∏–∑)
fix(web): –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∞ –æ—à–∏–±–∫–∞ –≤–∞–ª–∏–¥–∞—Ü–∏–∏ —Ñ–æ—Ä–º—ã –æ–±—Ä–∞—Ç–Ω–æ–π —Å–≤—è–∑–∏

# –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è (–±–µ–∑ —Ä–µ–ª–∏–∑–∞)
docs: –æ–±–Ω–æ–≤–ª–µ–Ω–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –ø–æ API

# –†–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥ (—Å–æ–∑–¥–∞—Å—Ç patch —Ä–µ–ª–∏–∑)
refactor(desktop): –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω DataService –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –∫—ç—à–µ–º

# Breaking change (—Å–æ–∑–¥–∞—Å—Ç major —Ä–µ–ª–∏–∑)
feat(api)!: –∏–∑–º–µ–Ω—ë–Ω —Ñ–æ—Ä–º–∞—Ç –æ—Ç–≤–µ—Ç–∞ API

BREAKING CHANGE: –ø–æ–ª–µ `status` —Ç–µ–ø–µ—Ä—å –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç enum –≤–º–µ—Å—Ç–æ —Å—Ç—Ä–æ–∫–∏

# –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ (–±–µ–∑ —Ä–µ–ª–∏–∑–∞)
chore(deps): –æ–±–Ω–æ–≤–ª–µ–Ω—ã –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ NuGet
```

---

## ü™ù Git Hooks

–ü—Ä–æ–µ–∫—Ç –∏—Å–ø–æ–ª—å–∑—É–µ—Ç [Husky](https://typicode.github.io/husky/) –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π –ø—Ä–æ–≤–µ—Ä–∫–∏ –∫–æ–º–º–∏—Ç–æ–≤.

### –£—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—ã–µ hooks

| Hook | –î–µ–π—Å—Ç–≤–∏–µ |
|------|----------|
| `commit-msg` | –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ñ–æ—Ä–º–∞—Ç–∞ —Å–æ–æ–±—â–µ–Ω–∏—è —á–µ—Ä–µ–∑ Commitlint |

### –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è Commitlint

–§–∞–π–ª `commitlint.config.js` –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç:
- –†–∞–∑—Ä–µ—à—ë–Ω–Ω—ã–µ —Ç–∏–ø—ã –∫–æ–º–º–∏—Ç–æ–≤
- –†–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–µ –æ–±–ª–∞—Å—Ç–∏ (scopes)
- –ü—Ä–∞–≤–∏–ª–∞ —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

### –£—Å—Ç–∞–Ω–æ–≤–∫–∞ hooks

```bash
# –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–∏ npm install
npm install

# –ò–ª–∏ –≤—Ä—É—á–Ω—É—é
npx husky install
```

---

## üöÄ –ö–∞–∫ –¥–µ–ª–∞—Ç—å –∫–æ–º–º–∏—Ç—ã

### –í–∞—Ä–∏–∞–Ω—Ç 1: –ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–π —Ä–µ–∂–∏–º (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)

```bash
npm run commit
```

Commitizen –ø—Ä–æ–≤–µ–¥—ë—Ç –≤–∞—Å —á–µ—Ä–µ–∑ –ø—Ä–æ—Ü–µ—Å—Å —Å–æ–∑–¥–∞–Ω–∏—è –ø—Ä–∞–≤–∏–ª—å–Ω–æ–≥–æ –∫–æ–º–º–∏—Ç–∞.

### –í–∞—Ä–∏–∞–Ω—Ç 2: –í—Ä—É—á–Ω—É—é

```bash
git commit -m "feat(api): –¥–æ–±–∞–≤–ª–µ–Ω–∞ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è –ø–æ JWT"
```

### –í–∞—Ä–∏–∞–Ω—Ç 3: VS Code / IDE

–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –∫–æ–º–º–∏—Ç–æ–≤, –Ω–æ —Å–ª–µ–¥—É–π—Ç–µ —Ñ–æ—Ä–º–∞—Ç—É Conventional Commits.

---

## üîÑ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π —Ä–µ–ª–∏–∑

–ü—Ä–∏ –ø—É—à–µ –≤ `main` –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è [Semantic Release](https://semantic-release.gitbook.io/):

### –ü—Ä–æ—Ü–µ—Å—Å —Ä–µ–ª–∏–∑–∞

1. ‚úÖ –ó–∞–ø—É—Å–∫–∞—é—Ç—Å—è –≤—Å–µ —Ç–µ—Å—Ç—ã (API, Web, Desktop)
2. üìä –ê–Ω–∞–ª–∏–∑–∏—Ä—É—é—Ç—Å—è –∫–æ–º–º–∏—Ç—ã —Å –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ —Ä–µ–ª–∏–∑–∞
3. üî¢ –û–ø—Ä–µ–¥–µ–ª—è–µ—Ç—Å—è –Ω–æ–≤–∞—è –≤–µ—Ä—Å–∏—è –ø–æ semver
4. üìù –ì–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç—Å—è/–æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è CHANGELOG.md
5. üè∑Ô∏è –°–æ–∑–¥–∞—ë—Ç—Å—è Git tag
6. üì¶ –°–æ–∑–¥–∞—ë—Ç—Å—è GitHub Release
7. üê≥ –°–æ–±–∏—Ä–∞—é—Ç—Å—è –∏ –ø—É–±–ª–∏–∫—É—é—Ç—Å—è Docker images –≤ GHCR
8. üíª –°–æ–±–∏—Ä–∞–µ—Ç—Å—è Desktop –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ (ZIP)

### –ê—Ä—Ç–µ—Ñ–∞–∫—Ç—ã —Ä–µ–ª–∏–∑–∞

- `ghcr.io/randomu3/hqstudio/api:X.Y.Z` ‚Äî Docker image API
- `ghcr.io/randomu3/hqstudio/web:X.Y.Z` ‚Äî Docker image Web
- `HQStudio-Desktop-vX.Y.Z.zip` ‚Äî Windows –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ

### –õ–æ–∫–∞–ª—å–Ω—ã–π dry-run

```bash
npm run release:dry
```

---

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### –ü–µ—Ä–µ–¥ –∫–æ–º–º–∏—Ç–æ–º –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ –∑–∞–ø—É—Å—Ç–∏—Ç–µ —Ç–µ—Å—Ç—ã:

```bash
# API —Ç–µ—Å—Ç—ã (xUnit + FluentAssertions)
dotnet test HQStudio.API.Tests

# Web —Ç–µ—Å—Ç—ã (Vitest)
cd HQStudio.Web && npm test

# Desktop —Ç–µ—Å—Ç—ã (xUnit, –±–µ–∑ Integration)
dotnet test HQStudio.Desktop.Tests --filter "Category!=Integration"
```

### –¢–µ—Å—Ç—ã —Å –ø–æ–∫—Ä—ã—Ç–∏–µ–º

```bash
# API
dotnet test HQStudio.API.Tests --collect:"XPlat Code Coverage"

# Web
cd HQStudio.Web && npm test -- --coverage
```

### Codecov

–ü–æ–∫—Ä—ã—Ç–∏–µ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è –≤ [Codecov](https://codecov.io/gh/randomu3/hqstudio) –ø—Ä–∏ –∫–∞–∂–¥–æ–º push.

---

## üìã Pull Request

### –ü—Ä–æ—Ü–µ—Å—Å

1. –°–æ–∑–¥–∞–π—Ç–µ –≤–µ—Ç–∫—É –æ—Ç `main`:
   ```bash
   git checkout -b feat/my-feature
   ```

2. –°–¥–µ–ª–∞–π—Ç–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –∏ –∫–æ–º–º–∏—Ç—ã

3. –£–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ —Ç–µ—Å—Ç—ã –ø—Ä–æ—Ö–æ–¥—è—Ç –ª–æ–∫–∞–ª—å–Ω–æ

4. –°–æ–∑–¥–∞–π—Ç–µ PR —Å –æ–ø–∏—Å–∞–Ω–∏–µ–º –∏–∑–º–µ–Ω–µ–Ω–∏–π

### –ß–µ–∫–ª–∏—Å—Ç PR

- [ ] –ö–æ–¥ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç —Å—Ç–∏–ª—é –ø—Ä–æ–µ–∫—Ç–∞ (EditorConfig)
- [ ] –î–æ–±–∞–≤–ª–µ–Ω—ã/–æ–±–Ω–æ–≤–ª–µ–Ω—ã —Ç–µ—Å—Ç—ã
- [ ] –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –æ–±–Ω–æ–≤–ª–µ–Ω–∞ (–µ—Å–ª–∏ –Ω—É–∂–Ω–æ)
- [ ] –í—Å–µ —Ç–µ—Å—Ç—ã –ø—Ä–æ—Ö–æ–¥—è—Ç –ª–æ–∫–∞–ª—å–Ω–æ
- [ ] –ö–æ–º–º–∏—Ç—ã —Å–ª–µ–¥—É—é—Ç Conventional Commits
- [ ] PR –æ–ø–∏—Å–∞–Ω–∏–µ –∑–∞–ø–æ–ª–Ω–µ–Ω–æ –ø–æ —à–∞–±–ª–æ–Ω—É

### –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ –ø—Ä–æ–≤–µ—Ä–∫–∏

–ü—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ PR –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∑–∞–ø—É—Å–∫–∞—é—Ç—Å—è:
- CI —Ç–µ—Å—Ç—ã (API, Web, Desktop)
- CodeQL security analysis
- Lint –∏ type check

---

## üîß CI/CD Pipeline

### Workflows

| Workflow | –¢—Ä–∏–≥–≥–µ—Ä | –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ |
|----------|---------|------------|
| **CI** | Push/PR to main, develop | –¢–µ—Å—Ç—ã + Codecov |
| **Release** | Push to main | Semantic Release + Docker + Desktop |
| **Pages** | Push to main | Deploy Web –Ω–∞ GitHub Pages |
| **CodeQL** | Push/PR + Weekly | Security analysis |
| **Dependabot Auto-merge** | Dependabot PR | Auto-merge patch/minor |

### Dependabot

–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–æ–∑–¥–∞—ë—Ç PR –¥–ª—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π:
- **npm** (Web) ‚Äî –µ–∂–µ–Ω–µ–¥–µ–ª—å–Ω–æ
- **NuGet** (API, Desktop) ‚Äî –µ–∂–µ–Ω–µ–¥–µ–ª—å–Ω–æ
- **GitHub Actions** ‚Äî –µ–∂–µ–º–µ—Å—è—á–Ω–æ

Patch –∏ minor updates –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –º–µ—Ä–∂–∞—Ç—Å—è –ø–æ—Å–ª–µ –ø—Ä–æ—Ö–æ–∂–¥–µ–Ω–∏—è CI.

---

## ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞ CI

### –ü–æ—Å–ª–µ push –≤ main –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ –ø—Ä–æ–≤–µ—Ä—å—Ç–µ —Å—Ç–∞—Ç—É—Å:

```powershell
# PowerShell
Invoke-RestMethod -Uri "https://api.github.com/repos/randomu3/hqstudio/actions/runs?per_page=5" `
  -Headers @{Accept="application/vnd.github.v3+json"} | `
  Select-Object -ExpandProperty workflow_runs | `
  ForEach-Object { "$($_.name) | $($_.status) | $($_.conclusion)" }
```

```bash
# GitHub CLI
gh run list --limit 5
```

### –û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç

–í—Å–µ workflows –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å `success`:
- ‚úÖ CI
- ‚úÖ Release
- ‚úÖ Deploy to GitHub Pages
- ‚úÖ CodeQL Security Analysis

### –ï—Å–ª–∏ CI –ø–∞–¥–∞–µ—Ç

1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏: `gh run view <run-id> --log-failed`
2. –ò—Å–ø—Ä–∞–≤—å—Ç–µ —Ç–µ—Å—Ç—ã –ª–æ–∫–∞–ª—å–Ω–æ
3. –°–¥–µ–ª–∞–π—Ç–µ fix –∫–æ–º–º–∏—Ç –∏ push

---

## üìö –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

- [Git-–∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –∏ CI/CD](docs/GIT-INTEGRATION.md) ‚Äî –ø–æ–ª–Ω–∞—è —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
- [–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞](docs/ARCHITECTURE.md) ‚Äî –æ–±–∑–æ—Ä —Å–∏—Å—Ç–µ–º—ã
- [API –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è](docs/API.md) ‚Äî REST endpoints
